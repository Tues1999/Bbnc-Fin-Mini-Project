{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="text-primary">แก้ไขรายการทะเบียนคุม</h2>
            <a href="{{ url_for('ledger_view', type=type) }}" class="btn btn-secondary">กลับ</a>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label for="date" class="form-label">วันที่</label>
                        <input type="date" class="form-control" id="date" name="date"
                            value="{{ entry.date.strftime('%Y-%m-%d') }}" readonly>
                        <small class="text-muted">ไม่สามารถแก้ไขวันที่ได้</small>
                    </div>

                    <div class="mb-3">
                        <label for="amount" class="form-label">จำนวนเงิน (บาท)</label>
                        <input type="number" step="0.01" class="form-control" id="amount" name="amount"
                            value="{{ entry.amount }}" required>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">รายละเอียด</label>
                        <textarea class="form-control" id="description" name="description"
                            rows="2">{{ entry.description or '' }}</textarea>
                    </div>

                    <div class="mb-3">
                        <label for="note" class="form-label">หมายเหตุ</label>
                        <textarea class="form-control" id="note" name="note" rows="3">{{ entry.note or '' }}</textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ประเภทรายการ</label>
                        <input type="text" class="form-control" value="{{ entry.transaction_type }}" readonly>
                        <small class="text-muted">ไม่สามารถแก้ไขประเภทได้</small>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">หมวดหมู่</label>
                        <input type="text" class="form-control" value="{{ entry.category }}" readonly>
                        <small class="text-muted">ไม่สามารถแก้ไขหมวดหมู่ได้</small>
                    </div>

                    {% if entry.expense_request_id %}
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> รายการนี้สร้างจากคำขอเบิกเงิน #{{ entry.expense_request_id }}
                    </div>
                    {% endif %}

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">บันทึกการแก้ไข</button>
                        <a href="{{ url_for('ledger_view', type=type) }}" class="btn btn-secondary">ยกเลิก</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
{% endblock %}